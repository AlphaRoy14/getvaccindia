{
    "AWSEBDockerrunVersion":2,

    "containerDefinitions":[
        {
            "name":"web",
            "links":[
                "redis_db"
            ],
            "image":"alpharoy2/getvaccindia:latest",
            "essential": false,
            "memory": 200,
            "environment":[
                {
                    "name":"CELERY_BROKER_URL",
                    "value":"redis://redis_db:6379/0"
                },
                {
                    "name":"CELERY_RESULT_BACKEND",
                    "value":"redis://redis_db:6379/0"
                }
            ],
            "ports":[
                {
                    "containerPort": 80,
                    "hostPort": 80
                }
            ],
            "command": ["./start_web.sh"]

        },
        {
            "name":"scheduler",
            "links":[
                "redis_db"
            ],
            "image":"alpharoy2/getvaccindia:latest",
            "essential": false,
            "memory": 200,
            "environment":[
                {
                    "name":"CELERY_BROKER_URL",
                    "value":"redis://redis_db:6379/0"
                },
                {
                    "name":"CELERY_RESULT_BACKEND",
                    "value":"redis://redis_db:6379/0"
                }
            ],
            "command": ["./start_scheduler.sh"]

        },
        {
            "name":"redis_db",
            "image":"redis:6-alpine",
            "memory":200,
            "essential": true

        },
        {
            "name": "worker",
            "links":[
                "redis_db",
                "scheduler"
            ],
            "image": "alpharoy2/getvaccindia:latest",
            "essential": false,
            "memory": 500,
            "environment":[
                {
                    "name":"CELERY_BROKER_URL",
                    "value":"redis://redis_db:6379/0"
                },
                {
                    "name":"CELERY_RESULT_BACKEND",
                    "value":"redis://redis_db:6379/0"
                }
            ],
	   "command": ["./start_workers.sh"]

        }
    ]
}
